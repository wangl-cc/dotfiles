# Format Layout
## Defines
# - user related: username, hostname, localip
# - directory related: directory, git, package, language
# - current shell status: jobs, conda
# - last command information: status
# - time information: time, cmd_duration
## Layout with sequence: 1st line left, 1st line right, 2nd line left, 2nd line right
# - user, directory
# - shell status
# - last command information
# - time
format = """ \
$username$hostname$localip\
$directory\
$git_branch$git_commit\
$package$julia$lua\
$git_state$git_status\
$fill \
$jobs$conda\
$line_break $status$character\
"""
right_format = """\
$cmd_duration$time\
"""
add_newline = true

# Modules
# General {{{
# hostname and localip always show together, only on ssh
[hostname]
format = "on [$hostname]($style) "

[localip]
disabled = false
format = "[\\($localipv4\\)]($style) "

[username]
format = "[$user]($style) "
show_always = true

# always show user before sudo
# thus this looks like: user with sudo
# disabled because it's a bit costly and not that useful
# [sudo]
# disabled = false
# format = "with [$symbol]($style) "
# symbol = "sudo"

[directory]
format = "at [$path]($style)[$read_only]($read_only_style) "
read_only = " "

[fill]
symbol = "─"

[jobs]
format = "with [$number backgroud job$symbol]($style) " # this is a trick to make it plural
symbol = "s"
number_threshold = 1
symbol_threshold = 2
style = "bold yellow"

[shell]
disabled = true

[shlvl]
disabled = false
symbol = " "

[status]
disabled = false
pipestatus = true
format = "[\\[$common_meaning$signal_name$maybe_int\\]]($style)"
pipestatus_segment_format = "$int"
pipestatus_format = "[\\[$common_meaning$signal_name$maybe_int:$pipestatus\\]]($style) "

[cmd_duration]
format = "took [$duration]($style) "
min_time = 10_000

[character]
success_symbol = "[](bold green)"
error_symbol = "[](bold red)"
vimcmd_symbol = "[](bold green)"
vimcmd_visual_symbol = "[](bold green)"
vimcmd_replace_symbol = "[](bold purple)"
vimcmd_replace_one_symbol = "[](bold yellow)"

[time]
disabled = false
time_format = "%a %r"

# General }}}

# Git {{{
[git_branch]
symbol = " "

[git_commit]
format = "on [\\($hash$tag\\)]($style) "
tag_disabled = false
tag_symbol = " 笠"

# This module is a bit costly
[git_status]
format = "$ahead_behind$conflicted$stashed$renamed$modified$deleted$untracked$staged"
# all with trailing space is needed
ahead = "⇡ $count "
behind = "⇣ $count "
diverged = "⇕ $ahead_count $behind_count "
conflicted = " "
stashed = "⚑ $count "
staged = "● $count "
renamed = " $count "
deleted = " $count "
untracked = " $count "
modified = " $count "
# }}}

# Language or enviroment {{{
[conda]
symbol = " "
format = "at [$symbol$environment]($style) "

[package]
symbol = " "

[julia]
symbol = " "

[lua]
symbol = " "
lua_binary = "fake-lua"

# [env_var]

# [custom]
# }}}

# vim:ts=2:sw=2:et:fdm=marker
